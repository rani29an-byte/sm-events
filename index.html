<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SM EVENTS & MANAGEMENT</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Montserrat:wght@300;400&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Montserrat', sans-serif; scroll-behavior: smooth; }
        h1, h2, h3 { font-family: 'Playfair Display', serif; }
        .hero-bg {
            background: linear-gradient(rgba(0,0,0,0.7), rgba(0,0,0,0.7)), url('https://images.unsplash.com/photo-1519167758481-83f550bb49b3?auto=format&fit=crop&q=80');
            background-size: cover; background-position: center;
        }
    </style>
</head>
<body class="bg-[#fdfbf7] text-gray-800">

    <nav class="bg-[#1a1a1a] text-white py-4 px-8 flex justify-between items-center sticky top-0 z-50 shadow-2xl">
        <div class="flex items-center">
            <div class="border-2 border-yellow-500 p-1 text-xl font-bold text-yellow-500">SM</div>
            <div class="ml-3 text-[10px] uppercase tracking-tighter leading-none font-bold text-yellow-500">Hospitality &<br>Managements</div>
        </div>
        <ul class="hidden md:flex space-x-8 text-xs uppercase tracking-widest items-center font-semibold">
            <li><a href="#" class="text-yellow-500">Home</a></li>
            <li><a href="#services" class="hover:text-yellow-500 transition">Services</a></li>
            <li><button onclick="openLogin()" class="bg-yellow-500 text-black px-6 py-2 hover:bg-yellow-600 transition rounded-full shadow-lg font-bold">LOGIN</button></li>
        </ul>
    </nav>

    <div id="loginModal" class="hidden fixed inset-0 bg-black/70 flex items-center justify-center z-50">
        <div class="bg-white p-10 rounded-xl w-[90%] max-w-[400px] relative shadow-2xl">
            <span onclick="closeLogin()" class="absolute top-4 right-6 text-3xl cursor-pointer text-gray-400 hover:text-black">&times;</span>
            <div class="text-center mb-8">
                <div class="inline-block border-2 border-yellow-500 p-2 text-2xl font-bold text-yellow-600 mb-2">SM</div>
                <h3 class="text-2xl font-bold text-gray-800">Welcome Back</h3>
                <p class="text-gray-500 text-xs">Enter your details to login</p>
            </div>
            <form onsubmit="handleLogin(event)" class="space-y-5">
                <div>
                    <label class="block text-[10px] font-bold uppercase tracking-widest text-gray-400 mb-2">Mobile Number</label>
                    <input type="tel" id="mobile" placeholder="+91 00000 00000" class="w-full p-4 border border-gray-200 rounded-lg text-black bg-white focus:ring-2 ring-yellow-500 outline-none transition" required>
                </div>
                <div>
                    <label class="block text-[10px] font-bold uppercase tracking-widest text-gray-400 mb-2">Password</label>
                    <input type="password" id="pass" placeholder="••••••••" class="w-full p-4 border border-gray-200 rounded-lg text-black bg-white focus:ring-2 ring-yellow-500 outline-none transition" required>
                </div>
                <button type="submit" class="w-full bg-[#1a1a1a] text-yellow-500 py-4 rounded-lg font-bold hover:bg-black shadow-xl transition uppercase tracking-widest mt-2">Login to Account</button>
                <p class="text-center text-xs text-gray-500 mt-6">
                    New here? <a href="javascript:void(0)" onclick="openSignUp()" class="text-yellow-600 font-bold underline">Create Account</a>
                </p>
            </form>
        </div>
    </div>

    <div id="signUpModal" class="hidden fixed inset-0 bg-black/70 flex items-center justify-center z-50">
        <div class="bg-white p-10 rounded-xl w-[90%] max-w-[400px] relative shadow-2xl">
            <span onclick="closeSignUp()" class="absolute top-4 right-6 text-3xl cursor-pointer text-gray-400 hover:text-black">&times;</span>
            <div class="text-center mb-8">
                <h2 class="text-3xl font-bold text-gray-800">Join Us</h2>
                <p class="text-gray-500 text-xs">Create your management account</p>
            </div>
            <form onsubmit="handleSignUp(event)" class="flex flex-col gap-5">
                <input type="text" id="newName" placeholder="Full Name" class="w-full p-4 border border-gray-200 rounded-lg text-black bg-white focus:ring-2 ring-yellow-500 outline-none" required>
                <input type="tel" id="newMobile" placeholder="Mobile Number" class="w-full p-4 border border-gray-200 rounded-lg text-black bg-white focus:ring-2 ring-yellow-500 outline-none" required>
                <input type="password" id="newPass" placeholder="Set Password" class="w-full p-4 border border-gray-200 rounded-lg text-black bg-white focus:ring-2 ring-yellow-500 outline-none" required>
                <button type="submit" class="w-full bg-black text-yellow-500 py-4 rounded-lg font-bold hover:bg-gray-800 transition shadow-lg mt-2">SIGN UP</button>
            </form>
        </div>
    </div>

    <header class="hero-bg h-[700px] flex flex-col items-center justify-center text-center text-white px-4">
        <div class="bg-black/40 backdrop-blur-md border border-yellow-500/50 rounded-full w-64 h-64 flex flex-col items-center justify-center mb-8 shadow-2xl">
            <p class="text-[8px] tracking-[0.3em] mb-2 uppercase text-yellow-500">World Class</p>
            <h1 class="text-8xl font-bold text-yellow-500 leading-none">SM</h1>
            <p class="text-[10px] tracking-widest mt-2 uppercase font-bold text-white">HOSPITALITY</p>
        </div>
        <h2 class="text-3xl md:text-5xl tracking-[0.2em] uppercase font-light mb-8 max-w-4xl">Excellence in Hospitality & Event Management</h2>
        <div class="flex space-x-4">
            <a href="#services" class="bg-yellow-500 hover:bg-yellow-600 text-black px-12 py-4 text-sm uppercase tracking-widest font-bold transition rounded-full shadow-lg">Our Services</a>
            <button onclick="openLogin()" class="border-2 border-white hover:bg-white hover:text-black px-12 py-4 text-sm uppercase tracking-widest font-bold transition rounded-full">Login</button>
        </div>
    </header>

    <script>
        function openLogin() {
            document.getElementById("loginModal").classList.remove("hidden");
            document.getElementById("signUpModal").classList.add("hidden");
            document.body.style.overflow = "hidden";
        }

        function closeLogin() {
            document.getElementById("loginModal").classList.add("hidden");
            document.body.style.overflow = "auto";
        }

        function openSignUp() {
            document.getElementById("loginModal").classList.add("hidden");
            document.getElementById("signUpModal").classList.remove("hidden");
        }

        function closeSignUp() {
            document.getElementById("signUpModal").classList.add("hidden");
            document.body.style.overflow = "auto";
        }

        // --- BACKEND CONNECTION FOR SIGN UP ---
        async function handleSignUp(e) {
            e.preventDefault();
            const name = document.getElementById("newName").value;
            const mobile = document.getElementById("newMobile").value;
            const password = document.getElementById("newPass").value;

            try {
                const response = await fetch('/api/signup', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ name, mobile, password })
                });

                const data = await response.json();
                if (response.ok) {
                    alert("✅ Registration Successful!");
                    closeSignUp();
                    openLogin();
                } else {
                    alert("❌ Error: " + data.message);
                }
            } catch (err) {
                alert("❌ Server Connection Failed!");
            }
        }

        // --- BACKEND CONNECTION FOR LOGIN ---
        async function handleLogin(e) {
            e.preventDefault();
            const mobile = document.getElementById("mobile").value;
            const password = document.getElementById("pass").value;

            try {
                const response = await fetch('/api/login', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ mobile, password })
                });

                const data = await response.json();
                if (response.ok) {
                    alert("✅ Welcome " + data.userName);
                    // Ab ye line dashboard par le jayegi
                    window.location.href = "dashboard.html"; 
                } else {
                    alert("❌ Login Failed: " + data.message);
                }
            } catch (err) {
                alert("❌ Server Error!");
            }
        }

        window.onclick = function(event) {
            if (event.target.id === "loginModal") closeLogin();
            if (event.target.id === "signUpModal") closeSignUp();
        }
    </script>
</body>
</html>